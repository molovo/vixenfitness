{% if page.title %}
  {% capture title %}{{ page.title }} | {{ site.title }}{% endcapture %}
{% else %}
  {% assign title = site.title %}
{% endif %}

{% if page.description %}
  {% assign description = page.description %}
{% elsif page.excerpt %}
  {% capture description %}{{ page.excerpt | strip_html }}{% endcapture %}
{% else %}
  {% assign description = site.description %}
{% endif %}

<!DOCTYPE html>
<html lang="en-GB" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!--
      DNS Prefetch
    -->
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    <link rel="dns-prefetch" href="//checkout.stripe.com" />
    <link rel="dns-prefetch" href="//use.typekit.net" />

    <!--
      Fonts
    -->
    <link rel="preload" href="/fonts/have-heart-one.woff2" as="font" type="font/woff2" crossorigin>
    <style>
    @font-face {
      font-family: 'Have Heart One';
      src: url('/fonts/have-heart-one.woff2') format('woff2'),
           url('/fonts/have-heart-one.woff') format('woff');
      font-weight: 400;
      font-style: normal;
    }
    </style>
    <script>
    (function() {
    
      // Optimization for Repeat Views
      if( sessionStorage.criticalFoftFontsLoaded ) {
        document.documentElement.classList.add('fonts-loaded');
        return;
      }
    
      // FontFaceObserver https://github.com/bramstein/fontfaceobserver
      (function(){function e(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function t(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function n(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",n),e()})}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t?(e.g=t,!0):!1}function s(t,n){function r(){var e=s;i(e)&&null!==e.a.parentNode&&n(e.g)}var s=t;e(t.b,r),e(t.c,r),i(t)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function l(){if(null===a){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}a=""!==e.style.font}return a}function c(e,t){return[e.style,e.weight,l()?e.stretch:"","100px",t].join(" ")}var u=null,a=null,f=null;o.prototype.load=function(e,i){var o=this,a=e||"BESbswy",l=i||3e3,h=(new Date).getTime();return new Promise(function(e,i){null===f&&(f=!!window.FontFace);if(f){var p=new Promise(function(e,t){function n(){(new Date).getTime()-h>=l?t():document.fonts.load(c(o,o.family),a).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}n()}),d=new Promise(function(e,t){setTimeout(t,l)});Promise.race([d,p]).then(function(){e(o)},function(){i(o)})}else t(function(){function t(){var t;if(t=-1!=m&&-1!=g||-1!=m&&-1!=S||-1!=g&&-1!=S)(t=m!=g&&m!=S&&g!=S)||(null===u&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=u&&(m==x&&g==x&&S==x||m==T&&g==T&&S==T||m==N&&g==N&&S==N)),t=!t;t&&(null!==C.parentNode&&C.parentNode.removeChild(C),clearTimeout(L),e(o))}function f(){if((new Date).getTime()-h>=l)null!==C.parentNode&&C.parentNode.removeChild(C),i(o);else{var e=document.hidden;if(!0===e||void 0===e)m=p.a.offsetWidth,g=d.a.offsetWidth,S=v.a.offsetWidth,t();L=setTimeout(f,50)}}var p=new n(a),d=new n(a),v=new n(a),m=-1,g=-1,S=-1,x=-1,T=-1,N=-1,C=document.createElement("div"),L=0;C.dir="ltr",r(p,c(o,"sans-serif")),r(d,c(o,"serif")),r(v,c(o,"monospace")),C.appendChild(p.a),C.appendChild(d.a),C.appendChild(v.a),document.body.appendChild(C),x=p.a.offsetWidth,T=d.a.offsetWidth,N=v.a.offsetWidth,f(),s(p,function(e){m=e,t()}),r(p,c(o,'"'+o.family+'",sans-serif')),s(d,function(e){g=e,t()}),r(d,c(o,'"'+o.family+'",serif')),s(v,function(e){S=e,t()}),r(v,c(o,'"'+o.family+'",monospace'))})})},"undefined"!=typeof module?module.exports=o:(window.FontFaceObserver=o,window.FontFaceObserver.prototype.load=o.prototype.load)})();
    
      var font = new FontFaceObserver('Have Heart One');
      Promise.all(font.load()).then(function () {
        document.documentElement.classList.add('fonts-loaded');

        // Optimization for Repeat Views
        sessionStorage.criticalFoftFontsLoaded = true;
      });
    })();
    
    (function(d) {
      var tkTimeout=3000;
      if(window.sessionStorage){if(sessionStorage.getItem('useTypekit')==='false'){tkTimeout=0;}}
      var config = {
      kitId: 'xgs6ljk',
      scriptTimeout: tkTimeout,
      async: true
      },
      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,'')+'wf-inactive';if(window.sessionStorage){sessionStorage.setItem('useTypekit','false')}},config.scriptTimeout),tk=d.createElement('script'),f=false,s=d.getElementsByTagName('script')[0],a;h.classList.add('wf-loading');tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!='complete'&&a!='loaded')return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
    })(document);
    </script>

    <!--
      Meta
    -->
    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}" />
    <meta name="author" content="{{ site.author }}" />
    <meta name="robots" content="noodp" />

    <!--
      Facebook Opengraph Meta
    -->
    <meta property="og:locale" content="en_GB">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ description }}">
    <meta property="og:url" content="{{ site.url }}">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:image" content="{{ site.url }}{{ site.logo }}">

    <!--
      Twitter Cards Meta
    -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="{{ description }}">
    <meta name="twitter:title" content="{{ title }}">
    <meta name="twitter:site" content="@{{ site.twitter_username }}">
    <meta name="twitter:image" content="{{ site.url }}{{ site.logo }}">

    <!--
      Favicons
    -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=PYE63dqKrE">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=PYE63dqKrE">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=PYE63dqKrE">
    <link rel="manifest" href="/manifest.json?v=PYE63dqKrE">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=PYE63dqKrE" color="#704155">
    <link rel="shortcut icon" href="/favicon.ico?v=PYE63dqKrE">
    <meta name="theme-color" content="#ffc857">

    <!--
      Schema.org data
    -->
    <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": "{{ site.title }}",
      "url": "{{ site.url }}",
      "description": "{{ site.description }}"
    }</script>
    <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "WebPage",
      "name": "{{ title }}",
      "url": "{{ site.url }}{{ page.url | replace: 'index.html', '' }}",
      "description": "{{ description }}"{% if page.layout == 'post' %},
        "mainEntity": {
          "@type": "BlogPosting",
          "@id": "{{ site.url }}{{ page.url | replace: 'index.html' }}#article",
          "datePublished": "{{ page.date | date_to_xmlschema }}",
          "dateModified": "{{ page.date | date_to_xmlschema }}",
          "mainEntityOfPage": "{{ site.url }}{{ page.url | replace: 'index.html' }}",
          "headline": "{{ page.title | slugify }}",
          "image": {
            "@type": "ImageObject",
            {% if page.image %}
              "url": "{{ site.url }}{{ page.image.url }}",
              "height": {{ page.image.height }},
              "width": {{ page.image.width }},
              "representativeOfPage": true
            {% else %}
              "url": "{{ site.url }}{{ site.logo }}",
              "height": 1200,
              "width": 1200,
              "representativeOfPage": false
            {% endif %}
          },
          "author": {
            "@type": "Person",
            "name": "{{ site.author }}",
            "sameAs": "{{ site.url }}"
          },
          "publisher": {
            "@type": "Organization",
            "name": "{{ site.name }}",
            "sameAs": "{{ site.url }}",
            "logo": {
              "@type": "ImageObject",
              "url": "{{ site.url }}{{ site.logo }}",
              "height": 1200,
              "width": 1200,
              "representativeOfPage": false
            }
          }
        }
      {% endif %}
    }</script>
    <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "Person",
      "url": "{{ site.url }}",
      "sameAs": [
        "https://twitter.com/{{ site.contact.social.twitter }}",
        "https://facebook.com/{{ site.contact.social.facebook }}",
        "https://instagram.com/{{ site.contact.social.instagram }}"
      ],
      "name":"{{ site.author }}"
    }</script>

    <!--
      Social Proof
    -->
    {% for item in site.contact.social %}
      {% assign domain = item[0] %}
      {% assign username = item[1] %}
      <link rel="me" href="//{{ domain }}.com/{{ username }}" />
    {% endfor %}
    <link rel="me" href="mailto:{{ site.contact.email }}" />

    {% webmentions_head %}

    <!--
      Meta links
    -->
    <link rel="canonical" href="{{ site.url }}{{ page.url | replace: 'index.html', '' }}" />
    {% if paginator.previous_page %}
      <link rel="prev" href="{{ site.url }}{{ paginator.previous_page_path }}" />
    {% elsif page.previous.url %}
      <link rel="prev" href="{{ site.url }}{{ page.previous.url }}" />
    {% endif %}
    {% if paginator.next_page %}
      <link rel="next" href="{{ site.url }}{{ paginator.next_page_path }}" />
    {% elsif page.next.url %}
      <link rel="next" href="{{ site.url }}{{ page.next.url }}" />
    {% endif %}
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }} Â» Feed" href="{{ site.url }}/feed.xml">

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-NRCXNJJ');</script>
    <!-- End Google Tag Manager -->

    <link rel="stylesheet" href="/css/main.css">

    <script src="https://checkout.stripe.com/checkout.js"></script>
  </head>

  <body class="page--{{ page.slug }} page--{{ page.layout }}">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRCXNJJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    {% include nav.html %}
    {% include intro.html %}

    {{ content }}

    {% include contact.html %}
    {% include hashtag.html %}

    <script src="/js/main.min.js"></script>
  </body>
</html>
